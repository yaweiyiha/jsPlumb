{"remainingRequest":"/Users/yaweiyihan/Desktop/code/yyb/activity/jsplumb/jsPlumb/node_modules/babel-loader/lib/index.js!/Users/yaweiyihan/Desktop/code/yyb/activity/jsplumb/jsPlumb/src/jsplumb.js","dependencies":[{"path":"/Users/yaweiyihan/Desktop/code/yyb/activity/jsplumb/jsPlumb/src/jsplumb.js","mtime":1608171946000},{"path":"/Users/yaweiyihan/Desktop/code/yyb/activity/jsplumb/jsPlumb/node_modules/cache-loader/dist/cjs.js","mtime":1607501676000},{"path":"/Users/yaweiyihan/Desktop/code/yyb/activity/jsplumb/jsPlumb/node_modules/babel-loader/lib/index.js","mtime":1607501675000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy95YXdlaXlpaGFuL0Rlc2t0b3AvY29kZS95eWIvYWN0aXZpdHkvanNwbHVtYi9qc1BsdW1iL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL1VzZXJzL3lhd2VpeWloYW4vRGVza3RvcC9jb2RlL3l5Yi9hY3Rpdml0eS9qc3BsdW1iL2pzUGx1bWIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICIvVXNlcnMveWF3ZWl5aWhhbi9EZXNrdG9wL2NvZGUveXliL2FjdGl2aXR5L2pzcGx1bWIvanNQbHVtYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9Vc2Vycy95YXdlaXlpaGFuL0Rlc2t0b3AvY29kZS95eWIvYWN0aXZpdHkvanNwbHVtYi9qc1BsdW1iL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlciI7CmltcG9ydCB7IGpzUGx1bWIgfSBmcm9tICJqc3BsdW1iIjsKaW1wb3J0IEV2ZW50RW1pdHRlciBmcm9tICJldmVudGVtaXR0ZXIzIjsKaW1wb3J0ICQgZnJvbSAianF1ZXJ5IjsgLy9pbXBvcnQgQ29uc3QgZnJvbSAiLi9jb25zdCI7Cgp2YXIgX19JRF9TVFJfXyA9ICJpZCI7CmltcG9ydCAiLi9pbmRleF9iaS5jc3MiOwppbXBvcnQgIi4vaW5kZXhfcWlhbnpoaWppLmNzcyI7Cgp2YXIganNwbHVtYiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0V2ZW50RW1pdHRlcikgewogIF9pbmhlcml0cyhqc3BsdW1iLCBfRXZlbnRFbWl0dGVyKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihqc3BsdW1iKTsKCiAgZnVuY3Rpb24ganNwbHVtYihvcHQpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywganNwbHVtYik7CgogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKTsKICAgIF90aGlzLm9wdCA9IG9wdDsKICAgIF90aGlzLmluc3RhbmNlID0gdW5kZWZpbmVkOwogICAgX3RoaXMuY29uc3QgPSBvcHQuY29uc3Q7CgogICAgX3RoaXMuX2luaXQoKTsKCiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoanNwbHVtYiwgW3sKICAgIGtleTogIl9pbml0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfaW5pdCgpIHsKICAgICAgdmFyIHRoYXQgPSB0aGlzOyAvL+WIneWni+WMlgoKICAgICAganNQbHVtYi5iaW5kKCJyZWFkeSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICB0aGF0Lmluc3RhbmNlID0ganNQbHVtYi5nZXRJbnN0YW5jZSh7CiAgICAgICAgICAvLyBkZWZhdWx0IGRyYWcgb3B0aW9ucwogICAgICAgICAgRHJhZ09wdGlvbnM6IHsKICAgICAgICAgICAgY3Vyc29yOiAicG9pbnRlciIsCiAgICAgICAgICAgIHpJbmRleDogMjAwMAogICAgICAgICAgfSwKICAgICAgICAgIENvbnRhaW5lcjogImNvbnRhaW5lciIsCiAgICAgICAgICBDb25uZWN0aW9uc0RldGFjaGFibGU6IHRydWUsCiAgICAgICAgICBSZWF0dGFjaENvbm5lY3Rpb25zOiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgdGhhdC5lbWl0KCJyZWFkeSIpOwogICAgICB9KTsgLy/liKDpmaQKCiAgICAgICQodGhpcy5vcHQuY29udGFpbmVyKS5vbigiY2xpY2siLCAiLnJlbW92ZSIsIGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgaWQgPSAkKHRoaXMpLnBhcmVudHMoIi5qc3BsdW1iX2NhcmQiKS5hdHRyKCJpZCIpOwoKICAgICAgICBpZiAoaWQpIHsKICAgICAgICAgIHRoYXQuZGVsZXRlTm9kZShpZCk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJhZGROb2RlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBhZGROb2RlKG5vZGUsIG9wdCkgewogICAgICAvL3JldHVybiBhIHVuaXF1ZSBpZAogICAgICBpZiAoIW5vZGUpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIm5vZGUgc3RyIGNhbiBub3QgYmUgZW1wdHkiKTsKICAgICAgfQoKICAgICAgdmFyIGNvbnRhaW5lciA9ICQodGhpcy5vcHQuY29udGFpbmVyKTsgLy/kvKDov5vmnaUKCiAgICAgIHZhciBlbCA9IG5vZGU7CiAgICAgIHZhciBpZCA9ICJqc3BsdW1iXyIuY29uY2F0KHRoaXMuX2dlbklEKDgpKTsKICAgICAgJChlbCkuYXR0cihfX0lEX1NUUl9fLCBpZCk7CiAgICAgICQoZWwpLmFkZENsYXNzKCJqc3BsdW1iX2NhcmQiKTsKICAgICAgY29udGFpbmVyLmFwcGVuZChlbCk7IC8vYWRkIGpzUGx1bWIgYXR0cmlidXRlCgogICAgICB0aGlzLl9hZGRQb2ludHMoaWQpOyAvL2FkZCBkcmFnZ2JsZQoKCiAgICAgIGlmIChvcHQuZHJhZ2dibGUpIHsKICAgICAgICB0aGlzLmluc3RhbmNlLmRyYWdnYWJsZSgkKGVsKSk7CiAgICAgIH0gLy9hZGQgZHJhZ2dibGUgIFRPRE8KCgogICAgICBpZiAob3B0LnJlc2l6YWJsZSkgey8vICQoYCMke2lkfWApLnJlc2l6YWJsZSh7CiAgICAgICAgLy8gICByZXNpemU6IGZ1bmN0aW9uKGV2ZW50LCB1aSkgewogICAgICAgIC8vICAgICB0aGlzLmluc3RhbmNlLnJlcGFpbnQodWkuaGVscGVyKTsKICAgICAgICAvLyAgIH0sCiAgICAgICAgLy8gfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBpZDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkZWxldGVOb2RlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBkZWxldGVOb2RlKGlkKSB7CiAgICAgIHRoaXMuaW5zdGFuY2UucmVtb3ZlKGlkKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjb25uZWN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjb25uZWN0KHNvdXJjZSwgdGFyZ2V0LCBvcHQpIHsKICAgICAgdmFyIGNvbW1vbiA9IHsKICAgICAgICBlbmRwb2ludDogIkRvdCIsCiAgICAgICAgYW5jaG9yOiBbIkxlZnQiLCAiUmlnaHQiLCAiVG9wIiwgIkJvdHRvbSJdCiAgICAgIH07CiAgICAgIHZhciBsYWJlbE9wdCA9IG9wdC5sYWJlbCA/IG9wdC5sYWJlbCA6IHt9OwogICAgICB0aGlzLmluc3RhbmNlLmNvbm5lY3QoewogICAgICAgIHNvdXJjZTogc291cmNlLAogICAgICAgIHRhcmdldDogdGFyZ2V0LAogICAgICAgIGRyb3BPcHRpb25zOiB7CiAgICAgICAgICBob3ZlckNsYXNzOiAiaG92ZXIiLAogICAgICAgICAgYWN0aXZlQ2xhc3M6ICJhY3RpdmUiCiAgICAgICAgfSwKICAgICAgICBjb25uZWN0b3I6IFsiRmxvd2NoYXJ0IiwgewogICAgICAgICAgc3R1YjogWzQwLCA2MF0sCiAgICAgICAgICBnYXA6IDEwLAogICAgICAgICAgY29ybmVyUmFkaXVzOiA4LAogICAgICAgICAgYWx3YXlzUmVzcGVjdFN0dWJzOiB0cnVlCiAgICAgICAgfV0sCiAgICAgICAgcGFpbnRTdHlsZTogb3B0LnBhaW50U3R5bGUgfHwgdGhpcy5jb25zdC5wYWludFN0eWxlLAogICAgICAgIC8vIOe6v+agt+W8jwogICAgICAgIGNvbm5lY3RvckhvdmVyU3R5bGU6IHRoaXMuY29uc3QuY29ubmVjdG9ySG92ZXJTdHlsZSwKICAgICAgICBlbmRwb2ludFN0eWxlOiB0aGlzLmNvbnN0LmVuZHBvaW50U3R5bGUsCiAgICAgICAgLy8g54K55qC35byPCiAgICAgICAgaG92ZXJQYWludFN0eWxlOiB0aGlzLmNvbnN0LmVuZHBvaW50SG92ZXJTdHlsZSwKICAgICAgICBvdmVybGF5czogW1siTGFiZWwiLCBsYWJlbE9wdF1dIC8v6K+l6aG55LiN6IO96K6+572uCgogICAgICB9LCBjb21tb24pOwogICAgfQogIH0sIHsKICAgIGtleTogImdldERhdGEiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdldERhdGEoKSB7fQogIH0sIHsKICAgIGtleTogIl9hZGRQb2ludHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9hZGRQb2ludHMoaWQpIHsKICAgICAgdmFyIGNvbW1vbiA9IHsKICAgICAgICBpc1NvdXJjZTogdHJ1ZSwKICAgICAgICBpc1RhcmdldDogdHJ1ZSwKICAgICAgICBtYXhDb25uZWN0aW9uczogNTAsCiAgICAgICAgY29ubmVjdG9yOiBbIkZsb3djaGFydCIsIHsKICAgICAgICAgIHN0dWI6IFs0MCwgNjBdLAogICAgICAgICAgZ2FwOiAxMCwKICAgICAgICAgIGNvcm5lclJhZGl1czogOCwKICAgICAgICAgIGFsd2F5c1Jlc3BlY3RTdHViczogdHJ1ZQogICAgICAgIH1dLAogICAgICAgIGNzc0NsYXNzOiAiZW5kUG9pbnQiLAogICAgICAgIHBhaW50U3R5bGU6IHRoaXMuY29uc3QuZW5kcG9pbnRTdHlsZSwKICAgICAgICBob3ZlclBhaW50U3R5bGU6IHRoaXMuY29uc3QuZW5kcG9pbnRIb3ZlclN0eWxlLAogICAgICAgIGNvbm5lY3RvclN0eWxlOiB0aGlzLmNvbnN0LmNvbm5lY3RvclBhaW50U3R5bGUsCiAgICAgICAgY29ubmVjdG9ySG92ZXJTdHlsZTogdGhpcy5jb25zdC5jb25uZWN0b3JIb3ZlclN0eWxlCiAgICAgIH07CiAgICAgIHRoaXMuaW5zdGFuY2UuYWRkRW5kcG9pbnQoaWQsIGNvbW1vbiwgewogICAgICAgIGFuY2hvcnM6IFsiTGVmdCJdLAogICAgICAgIHV1aWQ6ICJsZWZ0XyIuY29uY2F0KGlkKQogICAgICB9KTsKICAgICAgdGhpcy5pbnN0YW5jZS5hZGRFbmRwb2ludChpZCwgY29tbW9uLCB7CiAgICAgICAgYW5jaG9yczogWyJSaWdodCJdLAogICAgICAgIHV1aWQ6ICJyaWdodF8iLmNvbmNhdChpZCkKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiX2dlbklEIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2VuSUQobGVuZ3RoKSB7CiAgICAgIHJldHVybiBOdW1iZXIoTWF0aC5yYW5kb20oKS50b1N0cmluZygpLnN1YnN0cigzLCBsZW5ndGgpICsgRGF0ZS5ub3coKSkudG9TdHJpbmcoMzYpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIGpzcGx1bWI7Cn0oRXZlbnRFbWl0dGVyKTsKCmV4cG9ydCB7IGpzcGx1bWIgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["/Users/yaweiyihan/Desktop/code/yyb/activity/jsplumb/jsPlumb/src/jsplumb.js"],"names":["jsPlumb","EventEmitter","$","__ID_STR__","jsplumb","opt","instance","undefined","const","_init","that","bind","getInstance","DragOptions","cursor","zIndex","Container","ConnectionsDetachable","ReattachConnections","emit","container","on","id","parents","attr","deleteNode","node","Error","el","_genID","addClass","append","_addPoints","draggble","draggable","resizable","remove","source","target","common","endpoint","anchor","labelOpt","label","connect","dropOptions","hoverClass","activeClass","connector","stub","gap","cornerRadius","alwaysRespectStubs","paintStyle","connectorHoverStyle","endpointStyle","hoverPaintStyle","endpointHoverStyle","overlays","isSource","isTarget","maxConnections","cssClass","connectorStyle","connectorPaintStyle","addEndpoint","anchors","uuid","length","Number","Math","random","toString","substr","Date","now"],"mappings":"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","sourcesContent":["import { jsPlumb } from \"jsplumb\";\nimport EventEmitter from \"eventemitter3\";\nimport $ from \"jquery\";\n//import Const from \"./const\";\nconst __ID_STR__ = \"id\";\nimport \"./index_bi.css\";\nimport \"./index_qianzhiji.css\";\n\nexport default class jsplumb extends EventEmitter {\n  constructor(opt) {\n    super();\n    this.opt = opt;\n    this.instance = undefined;\n    this.const = opt.const;\n    this._init();\n  }\n\n  _init() {\n    const that = this;\n    //初始化\n    jsPlumb.bind(\"ready\", () => {\n      that.instance = jsPlumb.getInstance({\n        // default drag options\n        DragOptions: { cursor: \"pointer\", zIndex: 2000 },\n        Container: \"container\",\n        ConnectionsDetachable: true,\n        ReattachConnections: true,\n      });\n      that.emit(\"ready\");\n    });\n    //删除\n    $(this.opt.container).on(\"click\", \".remove\", function() {\n      const id = $(this)\n        .parents(\".jsplumb_card\")\n        .attr(\"id\");\n      if (id) {\n        that.deleteNode(id);\n      }\n    });\n  }\n  addNode(node, opt) {\n    //return a unique id\n    if (!node) {\n      throw new Error(\"node str can not be empty\");\n    }\n    const container = $(this.opt.container); //传进来\n    const el = node;\n    const id = `jsplumb_${this._genID(8)}`;\n    $(el).attr(__ID_STR__, id);\n    $(el).addClass(\"jsplumb_card\");\n    container.append(el);\n\n    //add jsPlumb attribute\n\n    this._addPoints(id);\n    //add draggble\n    if (opt.draggble) {\n      this.instance.draggable($(el));\n    }\n    //add draggble  TODO\n    if (opt.resizable) {\n      // $(`#${id}`).resizable({\n      //   resize: function(event, ui) {\n      //     this.instance.repaint(ui.helper);\n      //   },\n      // });\n    }\n\n    return id;\n  }\n  deleteNode(id) {\n    this.instance.remove(id);\n  }\n  connect(source, target, opt) {\n    let common = {\n      endpoint: \"Dot\",\n      anchor: [\"Left\", \"Right\", \"Top\", \"Bottom\"],\n    };\n\n    const labelOpt = opt.label ? opt.label : {};\n    this.instance.connect(\n      {\n        source,\n        target,\n        dropOptions: { hoverClass: \"hover\", activeClass: \"active\" },\n        connector: [\n          \"Flowchart\",\n          {\n            stub: [40, 60],\n            gap: 10,\n            cornerRadius: 8,\n            alwaysRespectStubs: true,\n          },\n        ],\n        paintStyle: opt.paintStyle || this.const.paintStyle, // 线样式\n        connectorHoverStyle: this.const.connectorHoverStyle,\n        endpointStyle: this.const.endpointStyle, // 点样式\n        hoverPaintStyle: this.const.endpointHoverStyle,\n        overlays: [[\"Label\", labelOpt]], //该项不能设置\n      },\n      common\n    );\n  }\n  getData() {}\n  _addPoints(id) {\n    let common = {\n      isSource: true,\n      isTarget: true,\n      maxConnections: 50,\n      connector: [\n        \"Flowchart\",\n        { stub: [40, 60], gap: 10, cornerRadius: 8, alwaysRespectStubs: true },\n      ],\n      cssClass: \"endPoint\",\n      paintStyle: this.const.endpointStyle,\n      hoverPaintStyle: this.const.endpointHoverStyle,\n      connectorStyle: this.const.connectorPaintStyle,\n      connectorHoverStyle: this.const.connectorHoverStyle,\n    };\n    this.instance.addEndpoint(id, common, {\n      anchors: [\"Left\"],\n      uuid: `left_${id}`,\n    });\n    this.instance.addEndpoint(id, common, {\n      anchors: [\"Right\"],\n      uuid: `right_${id}`,\n    });\n  }\n\n  _genID(length) {\n    return Number(\n      Math.random()\n        .toString()\n        .substr(3, length) + Date.now()\n    ).toString(36);\n  }\n}\n"]}]}